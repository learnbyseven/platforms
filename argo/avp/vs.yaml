apiVersion: k8s.nginx.org/v1
kind: VirtualServer
metadata:
  name: vault
  namespace: vault
spec:
  host: ec2-13-200-111-209.ap-south-1.compute.amazonaws.com
  tls:
    secret: tls-cert
  upstreams:
  - name: vault
    service: vault
    port: 8200
    lb-method: round_robin # Load balancing Algo to use 
    max-conns: 5 #Controlling 5 max concurrent connection per second
  routes:
  - path: /
    action:
      pass: vault
